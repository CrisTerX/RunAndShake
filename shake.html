<!DOCTYPE html>
<html>
<body>
<h2>Shake Test Online</h2>
<button id="shakeBtn">Simulate Shake</button>
<p id="status">Connecting...</p>
<p id="motionStatus">Motion Sensor: ❌</p>
<p id="networkStatus">Network Test: ❌</p>

<script>
const statusEl = document.getElementById('status');
const motionEl = document.getElementById('motionStatus');
const networkEl = document.getElementById('networkStatus');
const btn = document.getElementById('shakeBtn');

// ตั้งค่า Unity Server URL ตรงนี้
const UNITY_SERVER_URL = "http://YOUR_PUBLIC_IP_OR_DOMAIN:5001/shake";

// Motion Sensor
if (window.DeviceMotionEvent) motionEl.innerText = "Motion Sensor: ✅";
else motionEl.innerText = "Motion Sensor: ❌";

// ส่ง shake
function sendShake() {
    fetch(UNITY_SERVER_URL, { method: 'POST' })
    .then(res=>{
        statusEl.innerText = "✅ Shake sent!";
        networkEl.innerText = "Network Test: ✅";
    })
    .catch(err=>{
        statusEl.innerText = "❌ Failed to send shake";
        networkEl.innerText = "Network Test: ❌ (Cannot reach Unity Server)";
        console.error(err);
    });
}

// Button click
btn.addEventListener("click", sendShake);

// Device Motion
window.addEventListener('devicemotion', (event) => {
    const a = event.accelerationIncludingGravity;
    const total = Math.abs(a.x)+Math.abs(a.y)+Math.abs(a.z);
    if(total>20) sendShake();
});
</script>
</body>
</html>
