<!DOCTYPE html>
<html>
<body>
<h2>Shake Test</h2>
<button id="shakeBtn">Simulate Shake</button>
<p id="status">Connecting...</p>
<p id="motion">Motion Sensor: ❌</p>

<script>
const statusEl = document.getElementById('status');
const motionEl = document.getElementById('motion');
const btn = document.getElementById('shakeBtn');

const pcIP = prompt("Enter Unity PC IP:", "192.168.1.206");
const pcPort = 5000;

function sendShake() {
    fetch(`http://${pcIP}:${pcPort}/shake`, {method: "POST"})
    .then(res => {
        statusEl.innerText = "✅ Shake sent!";
    })
    .catch(err => {
        statusEl.innerText = "❌ Failed to send shake";
        console.error(err);
    });
}

btn.addEventListener("click", sendShake);

// Motion sensor
if(window.DeviceMotionEvent){
    motionEl.innerText = "Motion Sensor: ✅";
    window.addEventListener('devicemotion', (event) => {
        const a = event.accelerationIncludingGravity;
        const total = Math.abs(a.x)+Math.abs(a.y)+Math.abs(a.z);
        if(total>20) sendShake();
    });
}else{
    motionEl.innerText = "Motion Sensor: ❌";
}
</script>
</body>
</html>
