<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Shake Controller</title></head>
<body>
<h2>‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏¢‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡πÉ‡∏ô Unity</h2>
<p>‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö IP ‡∏Ç‡∏≠‡∏á PC (‡πÅ‡∏Å‡πâ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á)</p>

<script>
const PC_IP = "192.168.1.10"; // üîß ‡πÉ‡∏™‡πà IP ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á PC ‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ô Unity
const PORT = 7070;

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° UDP ‡∏ú‡πà‡∏≤‡∏ô fetch (‡πÉ‡∏ä‡πâ HTTP Relay)
async function sendShake() {
  fetch(`http://${PC_IP}:${PORT}/?msg=shake`).catch(()=>{});
}

// ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏¢‡πà‡∏≤
let lastShake = 0;
window.addEventListener("devicemotion", e => {
  let acc = e.accelerationIncludingGravity;
  let total = Math.abs(acc.x) + Math.abs(acc.y) + Math.abs(acc.z);
  let now = Date.now();
  if (total > 35 && now - lastShake > 800) {
    lastShake = now;
    fetch(`http://${PC_IP}:${PORT}/?msg=shake`).catch(()=>{});
    alert("‡πÄ‡∏Ç‡∏¢‡πà‡∏≤! (‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ Unity)");
  }
});
</script>
</body>
</html>
